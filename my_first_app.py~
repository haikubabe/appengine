import os

import webapp2
import jinja2
import json


from rot13 import translate

template_dir=os.path.join(os.path.dirname(_file_),'templates')
jinja_env=jinja2.Environment(loader=jinja2.FileSystemLoader(template_dir),autoescape=True)


def render_str(self,template, **params):
        t = jinja_env.get_template(template)
        return t.render(params)


class BaseHandler(webapp2.RequestHandler):
    
    def render(self,template,**kw):
        self.response.out.write(render_str(template, **kw))
    def write(self,*a,**kw):
        self.response.out.write(*a, **kw)



#class MainPage(BaseHandler):
	
	
#	def get(self):
#		self.render('rot-13.html')


def RotHandler(BaseHandler):
	def get(self):
		self.render('rot-13.html')

	def post(self):
		new_text=self.request.get('text')
		trans_text=translate(new_text)
		self.render('rot-13.html',text=trans_text)


app = webapp2.WSGIApplication([
    ('/rot13', RotHandler)],debug=True)


